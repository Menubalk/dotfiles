# macOS
# .exports

# Make Vim the default editor for local and remote sessions.
if [ -n "${SSH_CONNECTION}" ]; then
  export EDITOR="vim"
else
  export EDITOR="vim"
fi

# Enable persistent REPL history for `node`.
export NODE_REPL_HISTORY="${HOME}/.node_history"
# Allow 32³ entries; the default is 1000.
export NODE_REPL_HISTORY_SIZE="32768"
# Use sloppy mode by default, matching web browsers.
export NODE_REPL_MODE="sloppy"

# Make Python use UTF-8 encoding for output to stdin, stdout, and stderr.
export PYTHONIOENCODING="UTF-8"

# Shell history settings
# By doing this `bash` and `zsh` share their history
# Filename for history file
export HISTFILE="${HOME}/.shellhistory"
# Allow 32³ entries in history `buffer`
export HISTSIZE="32768"
# `bash` history settings
if [ -n "$BASH_VERSION" ]; then
  # Allow 32³ entries in history file
  export HISTFILESIZE="${HISTSIZE}"
  # Append instead of overwrite history file
  shopt -s histappend
  # Omit duplicates and commands that begin with a space from history
  export HISTCONTROL="ignoreboth:erasedups"
# `zsh` history settings
elif [ -n "$ZSH_VERSION" ]; then
  # # Allow 32³ entries in history file
  export SAVEHIST="32768"
  # Append into history file incrementally instead of write-on-exit
  setopt SHARE_HISTORY
  # Omit duplicates from history
  setopt HIST_IGNORE_DUPS
  # Omit commands that begin with a space from history
  setopt HIST_IGNORE_SPACE
  # Add timestamp for each entry
  # Disabled because of shared history file with bash
  #setopt EXTENDED_HISTORY
else
  : # do nothing
fi;

# Prefer US English and use UTF-8.
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# Highlight section titles in manual pages.
export LESS_TERMCAP_md="${YELLOW}"

# Don’t clear the screen after quitting a manual page.
export MANPAGER="less -X"

# Path and manpages
# Enable $DOTFILES binaries
export PATH="${HOME}/dotfiles/bin:${PATH}"
# User manpages
export MANPATH="/usr/local/man:${MANPATH}"

# Optimize color output of macOS `ls`
colorflag="-G"
export LSCOLORS=gxfxbEaEBxxEhEhBaDaCaD

# SSH keys
export SSH_KEY_PATH="${HOME}/.ssh/rsa_id"

# Set GPG env variable to allow apps use of GPG
export GPG_TTY=$(tty)

# Homebrew options
# Wait 2 weeks between `updating homebrew..`
export HOMEBREW_AUTO_UPDATE_SECS=1209600
